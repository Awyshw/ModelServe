# ==============================================================================
# 基础应用配置
# ==============================================================================
# 应用名称和版本
APP_NAME=OpenClaw Memory Service
APP_VERSION=1.0.0

# 运行环境：dev(开发)/test(测试)/prod(生产)
ENVIRONMENT=prod

# 服务器配置
HOST=0.0.0.0
PORT=8000
# 生产环境务必关闭热重载
RELOAD=false

# ==============================================================================
# 记忆模块核心配置
# ==============================================================================
# 短期记忆最大窗口大小（对话轮次）
EPISODIC_MAX_WINDOW=20

# 语义相似度阈值（0-1，值越高检索越严格）
SEMANTIC_SIMILARITY_THRESHOLD=0.7

# ==============================================================================
# 嵌入服务配置（核心：支持本地/OpenAI切换）
# ==============================================================================
# 嵌入模式：local(本地模型)/openai(OpenAI API)
EMBEDDING_MODE=local

# 嵌入向量缓存（避免重复计算/调用API）
EMBEDDING_CACHE_ENABLED=true
# 缓存有效期（秒）
EMBEDDING_CACHE_TTL=3600

# ------------------------------
# 本地嵌入模型配置（EMBEDDING_MODE=local时生效）
# ------------------------------
# 本地嵌入模型名称（sentence-transformers支持的模型）
# 推荐轻量模型：all-MiniLM-L6-v2（384维）
# 推荐高精度模型：all-mpnet-base-v2（768维）
LOCAL_EMBED_MODEL=all-MiniLM-L6-v2

# ------------------------------
# OpenAI嵌入配置（EMBEDDING_MODE=openai时必填）
# ------------------------------
# OpenAI API密钥（替换为你的实际密钥）
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# OpenAI嵌入模型名称
# 推荐：text-embedding-3-small（性价比高）/text-embedding-3-large（高精度）
OPENAI_EMBED_MODEL=text-embedding-3-small

# 自定义OpenAI API端点（可选，如使用代理/自建服务）
# OPENAI_API_BASE=https://api.openai.com/v1

# API超时时间（秒）
OPENAI_API_TIMEOUT=30

# API重试次数（失败自动重试）
OPENAI_MAX_RETRIES=3

# ==============================================================================
# 存储后端配置
# ==============================================================================
# 存储类型：json/redis/leveldb
STORAGE_TYPE=redis

# JSON/LevelDB存储路径（自动创建）
STORAGE_PATH=./storage_data

# Redis配置（STORAGE_TYPE=redis时生效）
REDIS_URL=redis://localhost:6379/0
# Redis密码（如有）：redis://:password@localhost:6379/0

# ==============================================================================
# 限流配置
# ==============================================================================
# 是否启用限流
RATE_LIMIT_ENABLED=true

# 限流规则：每分钟最大请求数
RATE_LIMIT_REQUESTS=100

# 限流窗口（秒）
RATE_LIMIT_WINDOW=60

# ==============================================================================
# 日志配置
# ==============================================================================
# 日志级别：DEBUG/INFO/WARNING/ERROR
LOG_LEVEL=INFO

# 日志文件路径（自动创建目录）
LOG_FILE=./logs/memory_service.log

# 日志轮转策略
LOG_ROTATION=1 day
# 日志保留时间
LOG_RETENTION=7 days

# ==============================================================================
# CORS跨域配置
# ==============================================================================
# 允许的跨域源（生产环境建议指定具体域名，如https://yourdomain.com）
CORS_ORIGINS=["*"]